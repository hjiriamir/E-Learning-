<!doctype html>
<html lang="en">
  <head>
      <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>forget password page</title>
    <!-- Google Fonts -->
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.3.1/css/all.css" integrity="sha384-mzrmE5qonljUremFsqc01SB46JvROS7bZs3IO2EmfFsd15uHvIt+Y8vEf7N7fWAU" crossorigin="anonymous">
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,400i,600,700|Raleway:300,400,400i,500,500i,700,800,900" rel="stylesheet">
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css">  
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>     
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js"></script>
 <!-- Material Icons -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">   
    <!-- CSS link -->
    <link rel="stylesheet" href="{{asset('hatlone/assets/css/forgetPasword.css')}}">
   
   
  </head>

<body>
<section class="vh-100 gradient-custom">
      <div class="container py-5 h-100">
        <div class="row d-flex justify-content-center align-items-center h-100">
          <div class="">
            <div class="card text-white" style="border-radius: 1rem;">
              <div class="card-body text-center p-5">
    
                <div class="mb-md-5 mt-md-3 pb-5">
                  <h1>HATLONE</h1>
                  <h3>E-learning</h3>
                  <img src="{{asset('hatlone/assets/imgs/forget.PNG')}}" alt="">
                  <h4>Forgot your password ?</h4>
                  <p>That's okay, it happens! Click on the button <br>
                    below to reset your password.</p>
                    <!-- Button trigger modal -->
<button class="btn reset-btn btn-lg" data-toggle="modal" data-target="#modal-1">
  Reset your password
</button>  
<div class="modal fade" id="modal-1">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Reset your password</h5>
        <button type="button" class="close float-end" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
        
      </div>
      <div class="modal-body ">
        <p>Enter your account email, we'll send you a link to reset your password</p>
                      <div class="d-flex align-items-center email-wrap">
                       {{ form_start(requestPassForm, { 'attr': {'id': 'reset-form'} }) }}
                       <label for="email">Email</label>
                {{ form_row(requestPassForm.email) }}
            
                                            </div>
                      <span>please note: if you have any previous password reset emails, the
                        links will be disabled and no longer work after you click send
                      </span>     
      </div>
      <div class="modal-footer">
        <button type="button" class="btn cancel-btn" data-dismiss="modal">Cancel</button>
        <button type="submit" class="btn send-btn" onclick="showModal(event)"<a href="#modal-2" data-toggle="modal" data-dismiss="modal">Send</a></button>
      </div>
      {{ form_end(requestPassForm) }}
    </div><!-- /.modal-content -->
  </div><!-- /.modal-dialog -->
</div><!-- /.modal -->  
  
<div class="modal fade" id="modal-2">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Check your email</h5>
        <button type="button" class="close" data-dismiss="modal">
          <span aria-hidden="true">&times;</span>
          <span class="sr-only">Close</span>
        </button>
      </div>
      <div class="modal-body modal-body-2">
        <p>We've sent password reset instructions to xxxxxxx@gmail.com</p>
        <p>If it doesn't arrive soon, check your spam folder or <a href="">send the email</a> again.</p>
        <p>Need help? Contact <a href="">support.hatlone.com</a>.</p>
      </div>
      <div class="modal-footer">
        <button class="float-end back-btn">
          <a href="{{ path('app_login') }}">Back to Login</a>
        </button>
      </div>
    </div><!-- /.modal-content -->
  </div><!-- /.modal-dialog -->
</div><!-- /.modal -->

              </div>
            </div>
          </div>
        </div>
      </div>
    </section>
  </body>
</html>


<script>
function showModal(event) {
    event.preventDefault(); // Prevent the default form submission

    var form = document.getElementById('reset-form');
    if (form.checkValidity()) {
        var formData = new FormData(form);

        // Send an AJAX request to the server
        var xhr = new XMLHttpRequest();
        xhr.open('POST', form.action, true);
        xhr.onreadystatechange = function() {
            if (xhr.readyState === XMLHttpRequest.DONE && xhr.status === 200) {
                // Display the second modal
                document.getElementById('modal-2').style.display = 'block';
                 var email = JSON.parse(xhr.responseText).email;
            } else {
                // Handle the error
                console.log(xhr.responseText);
            }
        };
        xhr.send(formData);
    }
}
 </script>